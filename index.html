<!doctype html>

<html lang=en>

<head>
    <meta charset=utf-8>
    <title>Agar Agar</title>
    <meta name="description" content="control the flow">
    
    <meta name="author" content="Eberhard Gräther">
    <meta name="author" content="Thomas Kempf">
    <meta name="author" content="Sebastian Kienzl">
    <meta name="author" content="Sebastian Köck">
    <meta name="author" content="Franz Lanzendorfer">
    <meta name="author" content="Benjamin Medicke">
    
    <link rel="stylesheet" type="text/css" href="./css/style.css" />
</head>
<body>
    
<canvas id="canvas">Your browser does not support &lt;canvas&gt;.</canvas>

<script id="vertex-shader" type="x-shader/x-vertex" charset="utf-8">

    uniform mat4 matrix;

    attribute vec3 position;
    
    void main(void) {
    
       gl_Position = matrix * vec4(position, 1.0);
       gl_PointSize = 3.0;
    
    }
    
</script>

<script id="fragment-shader" type="x-shader/x-fragment" charset="utf-8">

    #ifdef GL_ES
       precision highp float;
    #endif
    
    uniform vec4 color;
    
    void main(void) {
    
       gl_FragColor = color;
       
    }
    
</script>

<script id="stardust-vertex-shader" type="x-shader/x-vertex" charset="utf-8">

    uniform mat4 matrix;

    attribute vec3 position;
    
    varying float alpha;
    
    void main(void) {
    
       gl_Position = matrix * vec4(position.xy, 1.0, 1.0);
       
       gl_PointSize = 2.0;
       
       alpha = position.z;
    
    }
    
</script>

<script id="stardust-fragment-shader" type="x-shader/x-fragment" charset="utf-8">

    #ifdef GL_ES
       precision highp float;
    #endif
    
    uniform vec4 color;
    
    varying float alpha;
    
    void main(void) {
    
       gl_FragColor = vec4(.85, .85, .85, alpha);
       
    }
    
</script>

<script id="particle-vertex-shader" type="x-shader/x-vertex" charset="utf-8">

    uniform mat4 matrix;
    uniform float size;

    attribute vec3 position;
    
    void main(void) {
    
       gl_Position = matrix * vec4(position, 1.0);
       
       gl_PointSize = size;
    
    }
    
</script>

<script id="particle-fragment-shader" type="x-shader/x-fragment" charset="utf-8">

    #ifdef GL_ES
       precision highp float;
    #endif
    
    uniform sampler2D texture;
    
    const vec3 color = vec3(0.5, 0.5, 0.7);
    
    void main(void) {
    
       gl_FragColor = texture2D( texture, gl_PointCoord );
       //gl_FragColor.rgb = mix( color, gl_FragColor.rgb, 0.5 );
       
    }
    
</script>

<script id="leukocyte-vertex-shader" type="x-shader/x-vertex" charset="utf-8">

    const float PI = 3.1415926535897932384626433832;
    
    uniform mat4 matrix;
    
    uniform vec2 particleVector;
    uniform vec2 particlePosition;
    
    uniform float innerRadius;
    uniform float outerRadius;

    attribute vec3 position;
    
    void main(void) {

        vec2 centerToParticle = particleVector;
      
        float distanceFromCenter = clamp(length(centerToParticle), innerRadius, outerRadius + innerRadius);

        // map distanceFromCenter between 0 and PI:
        distanceFromCenter = ((distanceFromCenter - innerRadius) / outerRadius) * PI;

        // expand the stretching a bit, so it doesn't look
        // like the leukocyte isn't really touching the particle
        float stretchFactor = sin(distanceFromCenter) * 1.1;
        
        
        vec2 positionToParticle = particlePosition - position.xy;
        
        float distanceFromPosition = clamp(length(positionToParticle), 0.0, outerRadius / 2.0 + innerRadius);
        
        // map distanceFromPosition between 0 and PI / 2:
        distanceFromPosition = (distanceFromPosition / (outerRadius / 2.0 + innerRadius)) * (PI / 2.0);
        
        float positionFactor = cos(distanceFromPosition);
        
        positionToParticle = normalize(positionToParticle);

        gl_Position = matrix * vec4(position + vec3(positionToParticle * stretchFactor * positionFactor * (outerRadius / 2.0 - innerRadius), 0.0), 1.0);
    
    }
    
</script>

<script id="leukocyte-fragment-shader" type="x-shader/x-fragment" charset="utf-8">

    #ifdef GL_ES
       precision highp float;
    #endif
    
    void main(void) {
    
       gl_FragColor = vec4(0.3, 0.3, 0.3, 1.0);
       
    }
    
</script>

<script id="devourer-vertex-shader" type="x-shader/x-vertex" charset="utf-8">

    uniform mat4 matrix;
    uniform float size;

    attribute vec3 position;

    void main(void) {

       gl_Position = matrix * vec4(position, 1.0);
   
       gl_PointSize = size;

    }
    
</script>

<script id="devourer-fragment-shader" type="x-shader/x-fragment" charset="utf-8">

    #ifdef GL_ES
       precision highp float;
    #endif

    uniform sampler2D texture;

    const vec3 color = vec3(0.5, 0.5, 0.7);

    void main(void) {

       gl_FragColor = texture2D( texture, gl_PointCoord );
       //gl_FragColor.rgb = mix( color, gl_FragColor.rgb, 0.5 );
   
    }
    
</script>

<script type="text/javascript" src="./js/requestAnimationFrame.js" charset="utf-8"></script>
<script type="text/javascript" src="./js/utilities.js" charset="utf-8"></script>

<script type="text/javascript" src="./js/Vector.js" charset="utf-8"></script>
<script type="text/javascript" src="./js/Matrix.js" charset="utf-8"></script>

<script type="text/javascript" src="./js/WebGLTexture.js" charset="utf-8"></script>
<script type="text/javascript" src="./js/WebGLShader.js" charset="utf-8"></script>
<script type="text/javascript" src="./js/WebGLUtilities.js" charset="utf-8"></script>

<script type="text/javascript" src="./js/Entity.js" charset="utf-8"></script>
<script type="text/javascript" src="./js/Particle.js" charset="utf-8"></script>
<script type="text/javascript" src="./js/Leukocyte.js" charset="utf-8"></script>
<script type="text/javascript" src="./js/Cytoplast.js" charset="utf-8"></script>
<script type="text/javascript" src="./js/Devourer.js" charset="utf-8"></script>
<script type="text/javascript" src="./js/Entropyfier.js" charset="utf-8"></script>

<script type="text/javascript" src="./js/DustParticle.js" charset="utf-8"></script>
<script type="text/javascript" src="./js/Stardust.js" charset="utf-8"></script>

<script type="text/javascript" src="./js/Vectorfield.js" charset="utf-8"></script>
<script type="text/javascript" src="./js/InputHandler.js" charset="utf-8"></script>
<script type="text/javascript" src="./js/Controller.js" charset="utf-8"></script>

<script type="text/javascript" src="./js/Game.js" charset="utf-8"></script>
<script type="text/javascript" src="./js/agar-agar.js" charset="utf-8"></script>

</body>
</html>